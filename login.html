---
layout: unrestricted
route: login
---             
<style>
	label{width:100%;}
	input{width:100%;}
</style>            
<br>
<h1 style="text-align:center">login</h1>
<form onsubmit="createAccount(); return false;" style="width: 400px;margin: auto;">
	<label for="login">login</label> <br>
	<input type="text" id="login" name="login" value="John"> <br><br>	
	<label for="password">password</label> <br>
	<input type="password" id="password" value="12345" name="password"><br><br>	<br>	
	<!-- <select name="type" id="type">
		<option value="admin">admin</option>
		<option value="hr">hr</option>
		<option value="employee">employee</option>
		<option value="manager">manager</option>
	</select> -->
	
	<input type="submit" value="sign in">
	<br><br>
	<p> or <a href="/signup">signup here</a></p>
	
	<p id="signuperror"></p>
</form>



<script>
	createAccount = function(e){
		var data = $('form').serializeArray();
		UserApp.User.login({
			"login": data[0].value,
			"password": data[1].value
			}, 
			function(error, result) {
				if (error) {
					$("#signuperror").html(error.message);
				} else {
					id = result.user_id;
					setCookie("ua_session_token", result.token, 1);
					
					UserApp.User.get({"user_id": id}, function(error, result){
	
						if(!error){
							
							setCookie("account_type", result[0].properties.user_type.value, 1);
							location = '/';
						}else{
							$("#signuperror").html(error.message);
						}
					});

				}
			}
		);
	};
</script>



