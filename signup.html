---
layout: basic
route: signup
---             
<style>
	label, input, select{width:100%;}
</style>            
<br>
<h1 style="text-align:center">signup</h1>
<form onsubmit="createAccount(); return false;" style="width: 400px;margin: auto;">
	<label for="login">login</label> <br>
	<input type="text" id="login" name="login" value="test"> <br><br>

	<label for="email">email</label> <br>
	<input type="email" id="email" name="email" value="test@gmail.com"> <br><br>

	<label for="password">password</label> <br>
	<input type="password" id="password"  name="password" value="12345"><br><br>	

	<label for="type">Account type</label> <br>
	<select name="type" id="type">
		<option value="hr">hr</option>
		<option value="employee">employee</option>
		<option value="manager">manager</option>
	</select>
	<br> <br> <br>
	
	<input type="submit" value="create account">
	<br><br><br>
	<p id="signuperror"></p>
</form>

<script>
	
	createAccount = function(e){
		var data = $('form').serializeArray();
		UserApp.User.save({
		    "login": data[0].value,
		    "email": data[1].value,
		    "password": data[2].value,
		    "properties": {
		        "user_type": {
		            "value": data[3].value,
		            "override": true
		        }
		    }
		}, function(error, result){
		   console.log(error);
		   console.log(result);

			if(error){
				$("#signuperror").html(error.message);
			}else{
				UserApp.User.login({
					"login": data[0].value,
					"password": data[2].value
					}, 
					function(error, result) {
						if (error) {
							$("#signuperror").html(error.message);
						} else {
							// User is logged in, save result.token in session
							setCookie("ua_session_token", result.token, 1);
							setCookie("account_type", data[3].value, 1);
							location = "/";
						}
					}
				);
			}

		});
	}
</script>



